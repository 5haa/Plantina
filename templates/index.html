<!DOCTYPE html>
<html>
<head>
    <title>ESP32-CAM Person Detection</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body data-webcam="{{ 'true' if use_webcam else 'false' }}">
    <div class="main-container">
        <!-- Left Column - Camera -->
        <div class="camera-column">
            <h1>ESP32-CAM Plant Robot</h1>
            
            <div class="video-container">
                <div style="position: relative; display: inline-block;">
                    <img id="video-feed" src="{{ url_for('video_feed') }}" width="640" height="480">
                    <div id="performance-stats">FPS: --</div>
                </div>
            </div>
            
            <div class="mode-switch">
                <p id="current-mode">Current mode: <span id="mode-name">Browser Camera</span></p>
                <button class="mode-button" onclick="toggleMode()">Switch to ESP32-CAM</button>
            </div>
            
            <div class="browser-cam-container" id="browser-cam-section" style="display:block;">
                <h3>Browser Camera</h3>
                <p>Using your browser's camera for detection:</p>
                <video id="browser-video" autoplay playsinline></video>
                <div class="browser-cam-controls">
                    <button id="browser-start-btn" onclick="startBrowserCamera()">Start Camera</button>
                    <button id="browser-stop-btn" onclick="stopBrowserCamera()" disabled>Stop Camera</button>
                </div>
                <p id="browser-status">Detection is automatic once camera is started.</p>
            </div>
        </div>
        
        <!-- Right Column - Stats -->
        <div class="controls-column">
            <div class="status">
                <h3>Status</h3>
                <p id="detection-status">Waiting for detection...</p>
            </div>
            
            <div class="sensor-stats">
                <h3>Sensor Statistics</h3>
                <p>Moisture Level: <span id="moisture-value">--</span> (<span id="moisture-status">--</span>)</p>
                <p>Distance: <span id="distance-value">--</span> cm</p>
                <p>Current State: <span id="robot-state">--</span></p>
            </div>
            
            <!-- Manual Controls Section Removed -->
            
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>